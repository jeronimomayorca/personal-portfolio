<nav
  class="w-full fixed top-0 left-0 z-50 bg-secondary/80 backdrop-blur-md shadow-glow-sm animate-navbar-fade-in"
>
  <div class="container mx-auto px-4 py-3 flex justify-between items-center">
    <h1>
      <a
        href="#hero"
        class="text-2xl font-bold text-accent tracking-tight hover:scale-110 hover:rotate-[-3deg] transition-transform duration-300 ease-in-out navbar-link font-sora"
        >MayorcaDev</a
      >
    </h1>
    <!-- Enlaces y redes solo en md+ -->
    <div class="hidden md:flex items-center gap-6">
      <a
        href="#projects"
        class="hover:text-accent transition-colors font-medium relative group navbar-link"
        aria-label="Go to projects section"
      >
        Projects
        <span
          class="block h-0.5 bg-accent scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-300"
        ></span>
      </a>
      <a
        href="#experience"
        class="hover:text-accent transition-colors font-medium relative group navbar-link"
        aria-label="Go to experience section"
      >
        Experience
        <span
          class="block h-0.5 bg-accent scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-300"
        ></span>
      </a>
      <a
        href="#education"
        class="hover:text-accent transition-colors font-medium relative group navbar-link"
        aria-label="Go to education section"
      >
        Education
        <span
          class="block h-0.5 bg-accent scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-300"
        ></span>
      </a>
      <!-- Social Icons -->
      <div class="flex items-center gap-4 ml-4">
        <a
          href="https://github.com/jeronimomayorca"
          target="_blank"
          rel="noopener"
          class="hover:text-accent transition-colors group"
          aria-label="GitHub"
        >
          <svg
            class="w-6 h-6 group-hover:scale-125 group-hover:-rotate-6 transition-transform duration-300"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M12 2C6.48 2 2 6.58 2 12.26c0 4.5 2.87 8.32 6.84 9.67.5.09.68-.22.68-.48 0-.24-.01-.87-.01-1.7-2.78.62-3.37-1.36-3.37-1.36-.45-1.18-1.1-1.5-1.1-1.5-.9-.63.07-.62.07-.62 1 .07 1.53 1.05 1.53 1.05.89 1.56 2.34 1.11 2.91.85.09-.66.35-1.11.63-1.37-2.22-.26-4.56-1.14-4.56-5.07 0-1.12.39-2.03 1.03-2.75-.1-.26-.45-1.3.1-2.7 0 0 .84-.28 2.75 1.05A9.38 9.38 0 0 1 12 6.84c.85.004 1.71.12 2.51.34 1.91-1.33 2.75-1.05 2.75-1.05.55 1.4.2 2.44.1 2.7.64.72 1.03 1.63 1.03 2.75 0 3.94-2.34 4.81-4.57 5.07.36.32.68.94.68 1.9 0 1.37-.01 2.47-.01 2.81 0 .27.18.58.69.48A10.01 10.01 0 0 0 22 12.26C22 6.58 17.52 2 12 2Z"
            ></path>
          </svg>
        </a>
        <a
          href="https://linkedin.com/in/mayorcajeronimo"
          target="_blank"
          rel="noopener"
          class="hover:text-accent transition-colors group"
          aria-label="LinkedIn"
        >
          <svg
            class="w-6 h-6 group-hover:scale-125 group-hover:rotate-6 transition-transform duration-300"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M19 0h-14c-2.76 0-5 2.24-5 5v14c0 2.76 2.24 5 5 5h14c2.76 0 5-2.24 5-5v-14c0-2.76-2.24-5-5-5zm-11 19h-3v-9h3v9zm-1.5-10.28c-.97 0-1.75-.79-1.75-1.75s.78-1.75 1.75-1.75 1.75.79 1.75 1.75-.78 1.75-1.75 1.75zm13.5 10.28h-3v-4.5c0-1.08-.02-2.47-1.5-2.47-1.5 0-1.73 1.17-1.73 2.39v4.58h-3v-9h2.89v1.23h.04c.4-.75 1.38-1.54 2.84-1.54 3.04 0 3.6 2 3.6 4.59v4.72z"
            ></path>
          </svg>
        </a>
        <a
          href="https://twitter.com/JeronimoMayorca"
          target="_blank"
          rel="noopener"
          class="hover:text-accent transition-colors group"
          aria-label="Twitter"
        >
          <svg
            class="w-6 h-6 group-hover:scale-110 group-hover:-translate-y-1 transition-transform duration-300"
            fill="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              d="M24 4.56c-.883.392-1.832.656-2.828.775 1.017-.611 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-2.72 0-4.924 2.206-4.924 4.924 0 .386.044.762.127 1.124-4.09-.205-7.719-2.166-10.148-5.144-.424.729-.666 1.577-.666 2.476 0 1.708.87 3.216 2.188 4.099-.807-.026-1.566-.247-2.23-.616v.062c0 2.386 1.697 4.374 3.95 4.827-.413.112-.849.172-1.298.172-.317 0-.626-.03-.927-.086.627 1.956 2.444 3.377 4.6 3.417-1.68 1.317-3.797 2.102-6.102 2.102-.397 0-.788-.023-1.175-.069 2.179 1.397 4.768 2.213 7.548 2.213 9.057 0 14.012-7.506 14.012-14.012 0-.213-.005-.425-.014-.636.962-.695 1.797-1.562 2.457-2.549z"
            ></path>
          </svg>
        </a>
      </div>
    </div>
    <!-- Botón hamburguesa solo en móvil -->
    <button
      id="mobile-menu-button"
      class="flex md:hidden items-center justify-center w-10 h-10 rounded-lg hover:bg-accent/10 transition-colors"
      aria-label="Open menu"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-7 w-7"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
    </button>
  </div>
</nav>

<script>
  // Función para el desplazamiento suave
  function smoothScroll(e: Event) {
    e.preventDefault();
    const target = e.currentTarget as HTMLAnchorElement;
    const targetId = target.getAttribute("href");
    if (!targetId) return;

    const targetElement = document.querySelector(targetId);
    if (!targetElement) return;

    // Obtener la posición del elemento objetivo
    const targetPosition =
      targetElement.getBoundingClientRect().top + window.pageYOffset;
    const startPosition = window.pageYOffset;
    const distance = targetPosition - startPosition;
    const duration = 1000; // duración en milisegundos
    let start: number | null = null;

    // Función de animación
    function animation(currentTime: number) {
      if (start === null) start = currentTime;
      const timeElapsed = currentTime - start;
      const progress = Math.min(timeElapsed / duration, 1);

      // Función de easing (easeInOutCubic)
      const ease = (t: number) =>
        t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;

      window.scrollTo(0, startPosition + distance * ease(progress));

      if (timeElapsed < duration) {
        requestAnimationFrame(animation);
      }
    }

    requestAnimationFrame(animation);
  }

  // Agregar el evento a todos los enlaces del navbar
  document.querySelectorAll(".navbar-link").forEach((link) => {
    link.addEventListener("click", smoothScroll);
  });
</script>

<style>
  @keyframes navbar-fade-in {
    from {
      opacity: 0;
      transform: translateY(-24px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .animate-navbar-fade-in {
    animation: navbar-fade-in 0.8s cubic-bezier(0.4, 2, 0.3, 1) 0.1s both;
  }

  /* Animación para las secciones al hacer scroll */
  section {
    opacity: 0;
    transform: translateY(20px);
    transition:
      opacity 0.6s ease-out,
      transform 0.6s ease-out;
  }

  section.visible {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  // Función para animar las secciones al hacer scroll
  function animateOnScroll() {
    const sections = document.querySelectorAll("section");
    const triggerBottom = window.innerHeight * 0.8;

    sections.forEach((section) => {
      const sectionTop = section.getBoundingClientRect().top;

      if (sectionTop < triggerBottom) {
        section.classList.add("visible");
      }
    });
  }

  // Observar el scroll
  window.addEventListener("scroll", animateOnScroll);
  // Ejecutar una vez al cargar la página
  window.addEventListener("load", animateOnScroll);
</script>
